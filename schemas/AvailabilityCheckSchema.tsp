import "./common/AvailabilityUnit.tsp";
import "./capabilities/pricing/AvailabilityCheckPricingSchema.tsp";

const AVAILABILITY_CHECK_BODY_PRODUCT_ID_DOC = "The product id.";
const AVAILABILITY_CHECK_BODY_OPTION_ID_DOC = "The option id.";
const AVAILABILITY_CHECK_BODY_LOCAL_DATE_START_DOC = "Start date to query for (YYYY-MM-DD). Required if `localDateEnd` is set.";
const AVAILABILITY_CHECK_BODY_LOCAL_DATE_END_DOC = "End date to query for (YYYY-MM-DD). Required if `localDateStart` is set.";
const AVAILABILITY_CHECK_BODY_AVAILABILITY_IDS_DOC = "Filter the results by the given ids.";
const AVAILABILITY_CHECK_BODY_UNITS_DOC = "A list of units.";

const AVAILABILITY_CHECK_BODY_PRODUCT_ID_EXAMPLE = PRODUCT_ID_EXAMPLE;
const AVAILABILITY_CHECK_BODY_OPTION_ID_EXAMPLE = OPTION_ID_EXAMPLE;
const AVAILABILITY_CHECK_BODY_LOCAL_DATE_START_EXAMPLE = "2022-05-23";
const AVAILABILITY_CHECK_BODY_LOCAL_DATE_END_EXAMPLE = "2022-05-29";
const AVAILABILITY_CHECK_BODY_AVAILABILITY_IDS_EXAMPLE = #[
  "2022-05-23T00:00:00+01:00"
];
const AVAILABILITY_CHECK_BODY_UNITS_EXAMPLE = #[
  #{ id: UNIT_ID_ADULT, quantity: 2 },
  #{ id: UNIT_ID_CHILD, quantity: 1 }
];

const AVAILABILITY_CHECK_DATE_RANGE_BODY_EXAMPLE = #{
  productId: AVAILABILITY_CHECK_BODY_PRODUCT_ID_EXAMPLE,
  optionId: AVAILABILITY_CHECK_BODY_OPTION_ID_EXAMPLE,
  localDateStart: AVAILABILITY_CHECK_BODY_LOCAL_DATE_START_EXAMPLE,
  localDateEnd: AVAILABILITY_CHECK_BODY_LOCAL_DATE_END_EXAMPLE,
};

const AVAILABILITY_CHECK_AVAILABILITY_IDS_BODY_EXAMPLE = #{
  productId: AVAILABILITY_CHECK_BODY_PRODUCT_ID_EXAMPLE,
  optionId: AVAILABILITY_CHECK_BODY_OPTION_ID_EXAMPLE,
  availabilityIds: AVAILABILITY_CHECK_BODY_AVAILABILITY_IDS_EXAMPLE,
};

const AVAILABILITY_CHECK_WITH_UNITS_BODY_EXAMPLE = #{
  productId: AVAILABILITY_CHECK_BODY_PRODUCT_ID_EXAMPLE,
  optionId: AVAILABILITY_CHECK_BODY_OPTION_ID_EXAMPLE,
  localDateStart: AVAILABILITY_CHECK_BODY_LOCAL_DATE_START_EXAMPLE,
  localDateEnd: AVAILABILITY_CHECK_BODY_LOCAL_DATE_END_EXAMPLE,
  units: AVAILABILITY_CHECK_BODY_UNITS_EXAMPLE,
};

const AVAILABILITY_CHECK_DATE_RANGE_BODY_PRICING_EXAMPLE = #{
  ...AVAILABILITY_CHECK_DATE_RANGE_BODY_EXAMPLE,
  currency: "EUR",
};

@example(AVAILABILITY_CHECK_DATE_RANGE_BODY_EXAMPLE)
model AvailabilityCheckBody {
  @doc(AVAILABILITY_CHECK_BODY_PRODUCT_ID_DOC)
  @example(AVAILABILITY_CHECK_BODY_PRODUCT_ID_EXAMPLE)
  productId: string;

  @doc(AVAILABILITY_CHECK_BODY_OPTION_ID_DOC)
  @example(AVAILABILITY_CHECK_BODY_OPTION_ID_EXAMPLE)
  optionId: string;

  @doc(AVAILABILITY_CHECK_BODY_LOCAL_DATE_START_DOC)
  @example(AVAILABILITY_CHECK_BODY_LOCAL_DATE_START_EXAMPLE)
  localDateStart?: string;

  @doc(AVAILABILITY_CHECK_BODY_LOCAL_DATE_END_DOC)
  @example(AVAILABILITY_CHECK_BODY_LOCAL_DATE_END_EXAMPLE)
  localDateEnd?: string;

  @doc(AVAILABILITY_CHECK_BODY_AVAILABILITY_IDS_DOC)
  @example(AVAILABILITY_CHECK_BODY_AVAILABILITY_IDS_EXAMPLE)
  availabilityIds?: string[];

  @doc(AVAILABILITY_CHECK_BODY_UNITS_DOC)
  @example(AVAILABILITY_CHECK_BODY_UNITS_EXAMPLE)
  units?: AvailabilityUnit[];
  // capabilities
  ...AvailabilityPricingBody
}
